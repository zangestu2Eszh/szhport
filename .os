ZnJvbSBjb2xvcmVkIGltcG9ydCBmZyxhdHRyDQppbXBvcnQgcmFuZG9tIGFzIHN6aHINCmltcG9ydCBzb2NrZXQNCmRlZiBzemh3ZWwoKToNCgljPTANCgljYz0xDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApDQoJcHJpbnQoJ1xuJXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhoaGhoaCAgICAgICAgICAgICAlcycgJSAoZmcoYyksYXR0cihjYykpKSAgIA0KCWM9c3poci5yYW5kaW50KDEsMTUwKSAgICAgDQoJcHJpbnQoJyVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoOjo6OmggICAgICAgICAgICAgJXMnICUgKGZnKGMpLGF0dHIoY2MpKSkNCgljPXN6aHIucmFuZGludCgxLDE1MCkNCglwcmludCgnJXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGg6Ojo6aCAgICAgICAgICAgICAlcycgJSAoZmcoYyksYXR0cihjYykpKQ0KCWM9c3poci5yYW5kaW50KDEsMTUwKQ0KCXByaW50KCclcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaDo6OjpoICAgICAgICAgICAgICVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApDQoJcHJpbnQoJyVzICAgIHNzc3Nzc3Nzc3MgICB6enp6enp6enp6enp6enp6eiBoOjo6OmggaGhoaGggICAgICAgJXMnICUgKGZnKGMpLGF0dHIoY2MpKSkNCgljPXN6aHIucmFuZGludCgxLDE1MCkNCglwcmludCgnJXMgIHNzOjo6Ojo6Ojo6OnMgIHo6Ojo6Ojo6Ojo6Ojo6Ojp6IGg6Ojo6aGg6Ojo6OmhoaCAgICAlcycgJSAoZmcoYyksYXR0cihjYykpKQ0KCWM9c3poci5yYW5kaW50KDEsMTUwKQ0KCXByaW50KCclc3NzOjo6Ojo6Ojo6Ojo6OnMgejo6Ojo6Ojo6Ojo6Ojo6eiAgaDo6Ojo6Ojo6Ojo6Ojo6aGggICVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApDQoJcHJpbnQoJyVzczo6Ojo6OnNzc3M6Ojo6OnN6enp6enp6ejo6Ojo6OnogICBoOjo6Ojo6OmhoaDo6Ojo6OmggJXMnICUgKGZnKGMpLGF0dHIoY2MpKSkNCgljPXN6aHIucmFuZGludCgxLDE1MCkNCglwcmludCgnJXMgczo6Ojo6cyAgc3Nzc3NzICAgICAgIHo6Ojo6Ojp6ICAgIGg6Ojo6OjpoICAgaDo6Ojo6OmglcycgJSAoZmcoYyksYXR0cihjYykpKQ0KCWM9c3poci5yYW5kaW50KDEsMTUwKQ0KCXByaW50KCclcyAgIHM6Ojo6OjpzICAgICAgICAgICB6Ojo6Ojo6eiAgICAgaDo6Ojo6aCAgICAgaDo6Ojo6aCVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApDQoJcHJpbnQoJyVzICAgICAgczo6Ojo6OnMgICAgICAgejo6Ojo6OnogICAgICBoOjo6OjpoICAgICBoOjo6OjpoJXMnICUgKGZnKGMpLGF0dHIoY2MpKSkNCgljPXN6aHIucmFuZGludCgxLDE1MCkNCglwcmludCgnJXNzc3Nzc3MgICBzOjo6OjpzICAgIHo6Ojo6Ojp6ICAgICAgIGg6Ojo6OmggICAgIGg6Ojo6OmglcycgJSAoZmcoYyksYXR0cihjYykpKQ0KCWM9c3poci5yYW5kaW50KDEsMTUwKQ0KCXByaW50KCclc3M6Ojo6OnNzc3M6Ojo6OjpzICB6Ojo6Ojo6enp6enp6enogaDo6Ojo6aCAgICAgaDo6Ojo6aCVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApDQoJcHJpbnQoJyVzczo6Ojo6Ojo6Ojo6Ojo6cyAgejo6Ojo6Ojo6Ojo6Ojo6eiBoOjo6OjpoICAgICBoOjo6OjpoJXMnICUgKGZnKGMpLGF0dHIoY2MpKSkNCgljPXN6aHIucmFuZGludCgxLDE1MCkNCglwcmludCgnJXMgczo6Ojo6Ojo6Ojo6c3MgIHo6Ojo6Ojo6Ojo6Ojo6Ojp6IGg6Ojo6OmggICAgIGg6Ojo6OmglcycgJSAoZmcoYyksYXR0cihjYykpKQ0KCWM9c3poci5yYW5kaW50KDEsMTUwKQ0KCXByaW50KCclcyAgc3Nzc3Nzc3Nzc3MgICAgenp6enp6enp6enp6enp6enogaGhoaGhoaCAgICAgaGhoaGhoaCVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApCQ0KCXByaW50KCclcyAgICAgICAgZmI6IGh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zYWRlay5zemglcycgJSAoZmcoYyksYXR0cihjYykpKQ0KCWM9c3poci5yYW5kaW50KDEsMTUwKQkNCglwcmludCgnJXMgICAgICAgICAgICBUZWxlZ3JhbTpodHRwczovL3QubWUvemFuZ2VzdHVcbiVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApDQoJcHJpbnQoJyVzMSkgQ2hlY2sgQWxsIFBvcnQgOiVzJyAlIChmZyhjKSxhdHRyKGNjKSkpDQoJYz1zemhyLnJhbmRpbnQoMSwxNTApCQ0KCXByaW50KCclczIpIENoZWNrIFNwZWNpYWwgUG9ydCA6JXMnICUgKGZnKGMpLGF0dHIoY2MpKSkNCgljPXN6aHIucmFuZGludCgxLDE1MCkJDQoJbT1pbnQoaW5wdXQoJyVzUGxlYXNlIENob29zZSA6JXMnICUgKGZnKDE1KSxhdHRyKDEpKSkpCQ0KCWlmIG09PTE6DQoJCWlwbT1pbnB1dCgnUGxlYXNlIEVudGVyIGlwIG9yIGhvc3Q6JykNCgkJdHJ5Og0KCQkJaXA9aW50KGlwbSkNCgkJZXhjZXB0Og0KCQkJaXA9c29ja2V0LmdldGhvc3RieW5hbWUoaXBtKQ0KCQlzemhhbGxjaGVjayhpcCkNCgllbGlmIG09PTI6DQoJCWlwbT1pbnB1dCgnUGxlYXNlIEVudGVyIGlwIG9yIGhvc3Q6JykNCgkJDQoJCXRyeToNCgkJCWlwPWludChpcG0pDQoJCWV4Y2VwdDoNCgkJCWlwPXNvY2tldC5nZXRob3N0YnluYW1lKGlwbSkNCgkJcG9ydD1pbnQoaW5wdXQoJ1BsZWFzZSBFbnRlciBwb3J0OicpKQ0KCQlzemhjaGVjayhpcCxwb3J0KQ0KCWVsc2U6DQoJCXByaW50KCIhIUVSUk9SISFcblBsZWFzZSBUcnkgQWdhaW4oXl9eKSIpDQpkZWYgc3poYWxsY2hlY2soaXApOg0KCXN6aHQ9VHJ1ZQ0KCWZvciBwb3J0IGluIHJhbmdlKDEsNjQ3MzgpOg0KCQlzemhzID1zb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULHNvY2tldC5TT0NLX1NUUkVBTSkJDQoJCXN6aHBvPXN6aHMuY29ubmVjdF9leCgoaXAscG9ydCkpDQoJCWlmIHN6aHBvID09IDA6DQoJCQlpZiBzemh0Og0KCQkJCXByaW50KCJQT1JUIC8gU1RBVEUgLyBTRVJWSUNFIikNCgkJCQlzemh0PUZhbHNlDQoJCQlpZiBzemhzIT1Ob25lOg0KCQkJCXRyeToNCgkJCQkJcHJpbnQoInt9IC8gb3BlbiAvIi5mb3JtYXQocG9ydCksc29ja2V0LmdldHNlcnZieXBvcnQocG9ydCwndGNwJykpDQoJCQkJZXhjZXB0Og0KCQkJCQlhPXBvcnQJDQoJCXN6aHMuY2xvc2UoKQ0KCWlmIHN6aHQ6DQoJCXByaW50KCJBbGwgUG9ydHMgQ2xvc2VkIikNCmRlZiBzemhjaGVjayhpcCxwb3J0KToNCglzemh0PVRydWUNCglzemhzID1zb2NrZXQuc29ja2V0KHNvY2tldC5BRl9JTkVULHNvY2tldC5TT0NLX1NUUkVBTSkJDQoJc3pocG89c3pocy5jb25uZWN0X2V4KChpcCxwb3J0KSkNCglpZiBzemhwbyA9PSAwOg0KCQlpZiBzemh0Og0KCQkJcHJpbnQoIlBPUlQgLyBTVEFURSAvIFNFUlZJQ0UiKQ0KCQkJc3podD1GYWxzZQ0KCQl0cnk6DQoJCQlwcmludCgie30gLyBvcGVuIC8iLmZvcm1hdChwb3J0KSxzb2NrZXQuZ2V0c2VydmJ5cG9ydChwb3J0LCd0Y3AnKSkNCgkJZXhjZXB0Og0KCQkJcHJpbnQoIlxuUE9SVD0ge30gIFNUQVRFPSIuZm9ybWF0KHBvcnQpLCclc2Nsb3NlZCVzJyUoZmcoMSksYXR0cigyKSkpDQoJCXByaW50KCclcyAlcyclKGZnKDE1KSxhdHRyKDApKSkNCglzemhzLmNsb3NlKCkNCglpZiBzemh0Og0KCQlwcmludCgiXG5QT1JUPSB7fSAgU1RBVEU9Ii5mb3JtYXQocG9ydCksJyVzY2xvc2VkJXMnJShmZygxKSxhdHRyKDIpKSkNCgkJcHJpbnQoJyVzICVzJyUoZmcoMTUpLGF0dHIoMCkpKQ0Kc3pod2VsKCkNCg
